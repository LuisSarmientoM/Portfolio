---
import type { MarkdownInstance } from 'astro';
import BaseLayout from '../layouts/BaseLayout.astro';
import Section from '../components/Section.astro';
import Tag from '../components/Tag.astro';
import { education, experience, interests, profile, projects, skills } from '../data/resume';
const blogPosts = (Object.values(
  import.meta.glob<MarkdownInstance<Record<string, any>>>('./blog/*.md', { eager: true })
) as MarkdownInstance<Record<string, any>>[])
  .sort((a, b) => new Date(b.frontmatter.date).getTime() - new Date(a.frontmatter.date).getTime())
  .slice(0, 2);
---
<BaseLayout>
  <Fragment slot="head">
    <title>{profile.name} · {profile.title}</title>
  </Fragment>

  <div class="flex flex-col gap-6">
    <div class="grid gap-6 lg:grid-cols-[1.5fr_1fr]">
      <div class="card relative overflow-hidden p-8">
        <div class="absolute left-0 top-0 h-1 w-32 rounded-full ribbon" />
        <div class="flex flex-wrap items-center justify-between gap-3 text-slate-400">
          <span class="text-sm">{profile.location}</span>
          <span class="text-sm">Available for remote roles</span>
        </div>
        <div class="mt-6 flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between">
          <div class="space-y-3">
            <p class="text-sm uppercase tracking-[0.25em] text-slate-400">Portfolio</p>
            <h1 class="text-3xl font-bold leading-tight text-slate-50 sm:text-4xl">
              {profile.name}
            </h1>
            <p class="text-lg font-semibold text-slate-200">{profile.title}</p>
            <p class="max-w-2xl text-base leading-relaxed text-slate-200/90">{profile.summary}</p>
          </div>
          <div class="flex flex-wrap gap-3">
            {profile.links.map((link) => (
              <a
                class="inline-flex items-center gap-2 rounded-full bg-slate-800/70 px-4 py-2 text-sm font-semibold text-slate-100 ring-1 ring-inset ring-slate-700 transition hover:-translate-y-0.5 hover:bg-slate-800 hover:text-white"
                href={link.href}
                target="_blank"
                rel="noreferrer"
              >
                {link.label}
              </a>
            ))}
          </div>
        </div>
      </div>

      <div class="card flex flex-col gap-4 p-8">
        <div>
          <p class="text-xs uppercase tracking-[0.25em] text-slate-400">Core skills</p>
          <h2 class="mt-2 text-xl font-semibold text-slate-50">Crafting interfaces and systems</h2>
          <p class="mt-3 text-sm leading-relaxed text-slate-200">
            I work closely with product designers and backend teams to ship resilient experiences with a focus on accessibility,
            performance, and long-term maintainability.
          </p>
        </div>
        <div class="flex flex-wrap gap-2">
          {skills.expertise.map((skill) => <Tag label={skill} />)}
        </div>
        <div class="rounded-2xl bg-slate-900/60 p-4 ring-1 ring-inset ring-slate-800">
          <p class="text-xs uppercase tracking-[0.3em] text-slate-500">Recent focus</p>
          <p class="mt-2 text-sm text-slate-200">Design systems · Performance budgets · Accessible component APIs</p>
        </div>
      </div>
    </div>

    <div class="grid gap-6 lg:grid-cols-[1.6fr_1fr]">
      <div class="card p-8">
        <Section title="Experience" kicker="Timeline">
          <div class="space-y-10">
            {experience.map((item) => (
              <article class="rounded-2xl bg-slate-900/50 p-5 ring-1 ring-inset ring-slate-800">
                <div class="flex flex-wrap items-center justify-between gap-3">
                  <div>
                    <p class="text-sm uppercase tracking-[0.2em] text-slate-400">{item.period}</p>
                    <h3 class="text-xl font-semibold text-slate-50">{item.role}</h3>
                    <p class="text-sm text-slate-300">{item.company} · {item.location}</p>
                  </div>
                  <div class="flex flex-wrap gap-2">
                    {item.stack.map((tech) => <Tag label={tech} />)}
                  </div>
                </div>
                <ul class="mt-4 space-y-2 text-sm leading-relaxed text-slate-200">
                  {item.achievements.map((note) => (
                    <li class="flex gap-2">
                      <span class="mt-1 h-2 w-2 rounded-full bg-slate-500" aria-hidden="true" />
                      <span>{note}</span>
                    </li>
                  ))}
                </ul>
              </article>
            ))}
          </div>
        </Section>
      </div>

      <div class="flex flex-col gap-6">
      <div class="card p-8">
        <Section title="Blog" kicker="Writing">
          <div class="space-y-4">
            <p class="text-sm leading-relaxed text-slate-200">
              Notas breves sobre cómo documento componentes, mido el rendimiento y organizo el trabajo en productos digitales.
            </p>
            <div class="space-y-3">
              {blogPosts.map((post) => (
                <a
                  class="block rounded-2xl bg-slate-900/50 p-4 ring-1 ring-inset ring-slate-800 transition hover:-translate-y-1 hover:bg-slate-900"
                  href={post.url}
                >
                  <div class="flex items-center justify-between gap-3 text-xs uppercase tracking-[0.2em] text-slate-500">
                    <span>{post.frontmatter.date}</span>
                    <span>Entrada</span>
                  </div>
                  <p class="mt-2 text-base font-semibold text-slate-50">{post.frontmatter.title}</p>
                  <p class="mt-1 text-sm text-slate-200/90">{post.frontmatter.description}</p>
                </a>
              ))}
            </div>
            <a
              class="inline-flex items-center gap-2 text-sm font-semibold text-emerald-300 transition hover:-translate-y-0.5 hover:text-emerald-200"
              href="/blog"
            >
              Ver todas las entradas →
            </a>
          </div>
        </Section>
      </div>

      <div class="card p-8">
        <Section title="Projects" kicker="Selected">
          <div class="space-y-6">
            {projects.map((project) => (
              <a
                  class="group block rounded-2xl bg-slate-900/50 p-4 ring-1 ring-inset ring-slate-800 transition hover:-translate-y-1 hover:border-slate-700"
                  href={project.link}
                  target="_blank"
                  rel="noreferrer"
                >
                  <div class="flex items-start justify-between gap-3">
                    <div>
                      <h3 class="text-base font-semibold text-slate-50 group-hover:text-white">{project.name}</h3>
                      <p class="mt-1 text-sm leading-relaxed text-slate-200/90">{project.description}</p>
                    </div>
                    <svg
                      class="mt-1 h-5 w-5 text-slate-500 group-hover:text-slate-200"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.6"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      aria-hidden="true"
                    >
                      <path d="M7 17 17 7" />
                      <path d="M7 7h10v10" />
                    </svg>
                  </div>
                  <div class="mt-3 flex flex-wrap gap-2">
                    {project.tags.map((tag) => <Tag label={tag} />)}
                  </div>
                </a>
              ))}
            </div>
          </Section>
        </div>

        <div class="card p-8">
          <Section title="Skills & Tools" kicker="Stacks">
            <div class="space-y-4 text-sm text-slate-200">
              <div>
                <p class="text-xs uppercase tracking-[0.25em] text-slate-500">Expertise</p>
                <div class="mt-2 flex flex-wrap gap-2">
                  {skills.expertise.map((item) => <Tag label={item} />)}
                </div>
              </div>
              <div>
                <p class="text-xs uppercase tracking-[0.25em] text-slate-500">Tooling</p>
                <div class="mt-2 flex flex-wrap gap-2">
                  {skills.tooling.map((item) => <Tag label={item} />)}
                </div>
              </div>
              <div>
                <p class="text-xs uppercase tracking-[0.25em] text-slate-500">Languages</p>
                <div class="mt-2 flex flex-wrap gap-2">
                  {skills.languages.map((item) => <Tag label={item} />)}
                </div>
              </div>
            </div>
          </Section>
        </div>

        <div class="card p-8">
          <Section title="Education" kicker="Background">
            <div class="space-y-4">
              {education.map((item) => (
                <div class="rounded-xl bg-slate-900/50 p-4 ring-1 ring-inset ring-slate-800">
                  <p class="text-sm uppercase tracking-[0.2em] text-slate-400">{item.period}</p>
                  <h3 class="text-base font-semibold text-slate-50">{item.school}</h3>
                  <p class="text-sm text-slate-200">{item.program}</p>
                </div>
              ))}
            </div>
          </Section>
        </div>

        <div class="card p-8">
          <Section title="Interests" kicker="Personal">
            <div class="flex flex-wrap gap-2">
              {interests.map((item) => <Tag label={item} />)}
            </div>
          </Section>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>
