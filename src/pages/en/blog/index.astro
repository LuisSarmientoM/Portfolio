---
import type { MarkdownInstance } from 'astro';
import BaseLayout from '../../../layouts/BaseLayout.astro';

const posts = Object.values(
  import.meta.glob<MarkdownInstance<Record<string, any>>>('./*.md', { eager: true })
) as MarkdownInstance<Record<string, any>>[];
const sorted = posts.sort((a, b) => new Date(b.frontmatter.date).getTime() - new Date(a.frontmatter.date).getTime());
---
<BaseLayout lang="en">
  <Fragment slot="head">
    <title>Blog Â· Notes and process</title>
    <meta
      name="description"
      content="Short notes on product design, component documentation, and performance in digital experiences."
    />
  </Fragment>

  <section class="card relative overflow-hidden p-8">
    <div class="absolute left-0 top-0 h-1 w-28 rounded-full ribbon" />
    <p class="text-xs uppercase tracking-[0.28em] text-slate-500">Blog</p>
    <h1 class="mt-2 text-3xl font-bold leading-tight text-slate-50 sm:text-4xl">Behind the portfolio</h1>
    <p class="mt-3 max-w-2xl text-base leading-relaxed text-slate-200/90">
      Brief notes on how I design, document, and optimize interfaces. Each entry is a snapshot of how I work and the questions
      that show up every day.
    </p>
  </section>

  <div class="mt-8 grid gap-6 lg:grid-cols-[1.6fr_1fr]">
    <div class="space-y-4">
      {sorted.map((post) => (
        <a
          class="block rounded-2xl bg-slate-900/60 p-6 ring-1 ring-inset ring-slate-800 transition hover:-translate-y-1 hover:bg-slate-900 hover:ring-slate-700"
          href={post.url}
        >
          <div class="flex flex-wrap items-center justify-between gap-3 text-sm text-slate-400">
            <span>{post.frontmatter.date}</span>
            {post.frontmatter.tags && (
              <div class="flex flex-wrap gap-2">
                {post.frontmatter.tags.map((tag: string) => (
                  <span class="rounded-full bg-slate-950/70 px-3 py-1 text-xs font-semibold text-slate-200 ring-1 ring-inset ring-slate-800">
                    {tag}
                  </span>
                ))}
              </div>
            )}
          </div>
          <h2 class="mt-3 text-2xl font-semibold text-slate-50">{post.frontmatter.title}</h2>
          <p class="mt-2 text-base leading-relaxed text-slate-200/90">{post.frontmatter.description}</p>
        </a>
      ))}
    </div>

    <aside class="card flex flex-col gap-6 p-6">
      <div>
        <p class="text-xs uppercase tracking-[0.25em] text-slate-500">Quick archive</p>
        <p class="mt-2 text-sm text-slate-200">
          Every entry lives in Markdown to keep the workflow lightweight and versioned. You can read them on the site or directly
          from the repository.
        </p>
      </div>
      <div class="rounded-2xl bg-slate-900/50 p-5 ring-1 ring-inset ring-slate-800">
        <p class="text-sm font-semibold text-slate-100">Contact</p>
        <p class="mt-2 text-sm text-slate-200/90">Want to propose a topic or collaborate on a post?</p>
        <a
          class="mt-3 inline-flex items-center gap-2 text-sm font-semibold text-emerald-300 transition hover:-translate-y-0.5 hover:text-emerald-200"
          href="mailto:hola@example.com"
        >
          Email me at hola@example.com
        </a>
      </div>
    </aside>
  </div>
</BaseLayout>
